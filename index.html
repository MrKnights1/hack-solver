<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Hacking Device Solver</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(regs) {
                regs.forEach(function(r) { r.unregister(); });
            });
            caches.keys().then(function(keys) {
                keys.forEach(function(k) { caches.delete(k); });
            });
        }
        var _v = Date.now();
        (function() {
            var css = document.createElement('link');
            css.rel = 'stylesheet';
            css.href = 'style.css?' + _v;
            document.head.appendChild(css);
            var files = ['camera.js','detector.js','processor.js','templates.js','matcher.js','app.js'];
            for (var i = 0; i < files.length; i++) {
                var el = document.createElement('script');
                el.src = files[i] + '?' + _v;
                el.async = false;
                document.head.appendChild(el);
            }
        })();
    </script>
</head>
<body>
    <div id="app">
        <video id="camera" autoplay playsinline muted></video>
        <canvas id="overlay"></canvas>

        <div id="status">
            <span id="statusDot"></span>
            <span id="statusText">Tap START to begin</span>
        </div>

        <div id="debug"></div>
        <canvas id="debugCanvas"></canvas>
        <div id="version"></div>
        <div id="toast"></div>
        <div id="position"></div>

        <div id="controls">
            <button id="btnStart">START</button>
            <button id="btnStop" class="hidden">STOP</button>
        </div>
    </div>
    <script>
        (function() {
            var tag = 'v.' + String(_v).slice(-5);
            document.getElementById('version').textContent = tag;
            var t = document.getElementById('toast');
            t.textContent = 'Loaded ' + tag;
            t.className = 'show';
            setTimeout(function() { t.className = ''; }, 2500);
        })();
    </script>
</body>
</html>
